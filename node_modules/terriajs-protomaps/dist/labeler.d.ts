import Point from '@mapbox/point-geometry';
import { PreparedTile } from './view';
import { Bbox } from './tilecache';
import RBush from 'rbush';
import { LabelSymbolizer } from './symbolizer';
import { Filter } from './painter';
declare type TileInvalidationCallback = (tiles: Set<string>) => void;
export interface Label {
    anchor: Point;
    bboxes: Bbox[];
    draw: (ctx: any) => void;
}
export interface IndexedLabel {
    anchor: Point;
    bboxes: Bbox[];
    draw: (ctx: any) => void;
    order: number;
    tileKey: string;
}
export interface Layout {
    index: Index;
    order: number;
    scratch: any;
    zoom: number;
}
export interface LabelRule {
    id?: string;
    minzoom?: number;
    maxzoom?: number;
    dataLayer: string;
    symbolizer: LabelSymbolizer;
    filter?: Filter;
    visible?: boolean;
    sort?: (a: any, b: any) => number;
}
export declare const covering: (display_zoom: number, tile_width: number, bbox: Bbox) => {
    display: string;
    key: string;
}[];
export declare class Index {
    tree: RBush<any>;
    current: Map<string, Set<IndexedLabel>>;
    constructor();
    has(tileKey: string): boolean;
    size(): number;
    keys(): IterableIterator<string>;
    searchBbox(bbox: Bbox, order: number): Set<IndexedLabel>;
    searchLabel(label: Label, order: number): Set<IndexedLabel>;
    bboxCollides(bbox: Bbox, order: number): boolean;
    labelCollides(label: Label, order: number): boolean;
    insert(label: Label, order: number, tileKey: string): void;
    prune(keyToRemove: string): void;
    removeLabel(labelToRemove: IndexedLabel): void;
}
export declare class Labeler {
    index: Index;
    z: number;
    scratch: any;
    labelRules: LabelRule[];
    callback?: TileInvalidationCallback;
    constructor(z: number, scratch: any, labelRules: LabelRule[], callback?: TileInvalidationCallback);
    private layout;
    private findInvalidatedTiles;
    private pruneCache;
    add(prepared_tile: PreparedTile): number;
}
export declare class Labelers {
    labelers: Map<number, Labeler>;
    scratch: any;
    labelRules: LabelRule[];
    callback: TileInvalidationCallback;
    constructor(scratch: any, labelRules: LabelRule[], callback: TileInvalidationCallback);
    add(prepared_tile: PreparedTile): number;
    getIndex(z: number): Index | undefined;
}
export {};
